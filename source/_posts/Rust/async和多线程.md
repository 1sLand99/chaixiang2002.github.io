- 有大量 `IO` 任务需要并发运行时，选 `async` 模型
- 有部分 `IO` 任务需要并发运行时，选多线程，如果想要降低线程创建和销毁的开销，可以使用线程池
- 有大量 `CPU` 密集任务需要并行运行时，例如并行计算，选多线程模型，且让线程数等于或者稍大于 `CPU` 核心数
- 无所谓时，统一选多线程



async任务切换比线程切换快，1个线程上有多个async任务。

- 有大量 `IO` 任务需要并发运行时，选 `async` 模型
- 有部分 `IO` 任务需要并发运行时，选多线程，如果想要降低线程创建和销毁的开销，可以使用线程池
- 有大量 `CPU` 密集任务需要并行运行时，例如并行计算，选多线程模型，且让线程数等于或者稍大于 `CPU` 核心数
- 无所谓时，统一选多线程

tokio 是**协作式**的调度器

CPU 密集的任务很可能会一直霸占着 CPU，IO任务容易饿死，**建议多线程**

那一个下载任务占用一个线程的模式就太重了，会很容易成为程序的瓶颈，**建议多个任务**映射到少量线程上

`async` 底层也是基于线程实现，但是它基于线程封装了一个运行时，可以将多个任务映射到少量线程上，然后将线程切换变成了任务切换，后者仅仅是内存中的访问，因此要高效的多。

#### [兼容性考虑](https://course.rs/advance/async/getting-started.html#兼容性考虑)

异步具有传染性