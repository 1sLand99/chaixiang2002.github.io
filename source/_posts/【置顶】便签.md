---
title: 【置顶】便签
comments: true
date: 2023-07-29 21:57:27
layout:
updated:
categories:
tags:
lang:
---
1. 设计模式
2. websock

# 资源

1. [⁡⁡⁡‬⁣‍⁣‍‍⁣⁤‍﻿‬⁢﻿⁢﻿‍⁢‌‌‍‌‌‬⁢‌‍⁣‍⁡‌⁡⁡‬﻿⁡⁣⁤⁢资源托管 - 飞书云文档 (feishu.cn)](https://regws02vdj.feishu.cn/docx/Cw8mdjHh2o4BGLxSIbhcOr9anJd)
2. [StackEdit中文版](https://stackedit.cn/app#)





1. **开机时创建所有云机的对应设备文件** ：在宿主机开机时，会为每一个云机创建一个对应的设备文件。这个设备文件用于在云机和宿主机之间传递屏幕旋转的信息。
2. **云机开机时，从宿主机挂载映射自己的设备文件** ：当云机开机时，它会从宿主机挂载映射到自己的设备文件。这样，云机就可以通过这个设备文件与宿主机进行通信。
3. **云机系统屏幕旋转，触发回调函数** ：当云机系统的屏幕旋转时，会触发一个回调函数。这个回调函数是在 `WindowManagerService`或 `DisplayRotation`类中定义的。这个回调函数会在屏幕旋转时被调用，用于处理屏幕旋转的事件。
4. **往设备文件写入数据** ：在回调函数中，会往设备文件写入数据。这些数据包含了屏幕旋转的信息。这个过程是通过 `RotationPolicy`类中的方法实现的。
5. **steam程序监听到文件修改，发送旋转角度给客户端** ：在宿主机端，有一个steam程序会监听设备文件的修改。当它监听到设备文件被修改时，就知道云机系统的屏幕旋转了。然后，它会把旋转的角度发送给客户端。这个过程是通过 `SettingsObserver`类中的方法实现的。
6. **客户端发生响应旋转** ：客户端收到旋转角度后，会根据收到的角度进行相应的旋转。这样，客户端的屏幕就可以跟随云机系统的屏幕旋转。
