没有成功复刻



### 真正的情况

root明明还是勾的状态，但是重启后应用实现没有root的权限





2个标志：
GrantRoot、su

```verilog
09-19 06:10:27.936 63987 63987 I GrantRoot: root---checkRootable result: 1, response: 0 ,uid:10052
09-19 06:10:35.121 64040 64040 I GrantRoot: root---checkRootable result: 1, response: 1 ,uid:10093
```

response为0没有root，response为1有root







有一定概率批量掉root

怀疑

```verilog
09-06 06:19:46.133766 57384 57561 W System.err: java.io.FileNotFoundException: /data/user/0/com.caishen.guaji/cache/optlist.ser: open failed: ENOENT (No such file or directory)
09-06 06:19:46.133829 57384 57561 W System.err: 	at libcore.io.IoBridge.open(IoBridge.java:496)
09-06 06:19:46.133840 57384 57561 W System.err: 	at java.io.FileInputStream.<init>(FileInputStream.java:159)
09-06 06:19:46.133851 57384 57561 W System.err: 	at java.io.FileInputStream.<init>(FileInputStream.java:115)
09-06 06:19:46.133861 57384 57561 W System.err: 	at com.tencent.smtt.net.b.b(TbsJavaCore:12)
09-06 06:19:46.133874 57384 57561 W System.err: 	at com.tencent.smtt.net.b.c(TbsJavaCore:4)
09-06 06:19:46.133884 57384 57561 W System.err: 	at com.tencent.smtt.net.NetworkSmttService.preconnectMainResources(TbsJavaCore:1)
09-06 06:19:46.133935 57384 57561 W System.err: Caused by: android.system.ErrnoException: open failed: ENOENT (No such file or directory)
09-06 06:19:46.133947 57384 57561 W System.err: 	at libcore.io.Linux.open(Native Method)
09-06 06:19:46.133956 57384 57561 W System.err: 	at libcore.io.ForwardingOs.open(ForwardingOs.java:167)
09-06 06:19:46.133966 57384 57561 W System.err: 	at libcore.io.BlockGuardOs.open(BlockGuardOs.java:252)
09-06 06:19:46.133975 57384 57561 W System.err: 	at libcore.io.ForwardingOs.open(ForwardingOs.java:167)
09-06 06:19:46.133986 57384 57561 W System.err: 	at android.app.ActivityThread$AndroidOs.open(ActivityThread.java:7337)
09-06 06:19:46.134000 57384 57561 W System.err: 	at libcore.io.IoBridge.open(IoBridge.java:482)
09-06 06:19:46.134009 57384 57561 W System.err: 	... 5 more
09-06 06:19:46.162391 57384 57384 I NX      : onViewInitFinished: true
```





```
09-06 06:19:44.248711 57342 57342 E VRMountReceiver: ---------------- action = android.intent.action.MEDIA_MOUNTED
09-06 06:19:44.248762 57342 57342 E VRMountReceiver: ------------- mount path = /storage/emulated/0
09-06 06:19:44.249110 57342 57342 E VRMountReceiver: ---------------- pathUri is null 
```





### 进展

正常情况

![image-20240925170003828](https://cdn.jsdelivr.net/gh/chaixiang2002/repo/picgo/img/202409251700921.png)

异常情况

![image-20240925170152257](https://cdn.jsdelivr.net/gh/chaixiang2002/repo/picgo/img/202409251701412.png)





查找方法：

```verilog
09-25 15:26:26.499999 34013 34041 I am_proc_start: [0,34655,10099,com.xiaocaishen,service,{com.xiaocaishen/com.nx.uiauto.accessibility.AccessibilityService}]
```

找到应用程序的pid

```verilog
09-25 15:26:26.701774 34013 34041 I am_proc_start: [0,34755,10099,com.xiaocaishen:web,service,{com.xiaocaishen/com.main.app.X5ProcessInitService}]
```

找到应用程序子进程的pid

问题锁定：com.xiaocaishen进程没有相关的获取Grantroot





### 应用自启

[谈谈Android中的persistent属性_android:persistent-CSDN博客](https://blog.csdn.net/salmon_zhang/article/details/90741912)

